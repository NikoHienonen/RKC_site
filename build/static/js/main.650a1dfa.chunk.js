(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{194:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(30),o=a.n(r),c=a(88),u=a(22),s=a(7);a(95);function m(){return l.a.createElement("button",{className:"menu-item",onClick:function(){sessionStorage.clear(),window.location.reload()}},"Kirjaudu ulos")}function i(){var e=sessionStorage.getItem("currentAuthData");return l.a.createElement("div",{className:"menu-wrap"},l.a.createElement("input",{type:"checkbox",className:"toggler"}),l.a.createElement("div",{className:"hamburger"},l.a.createElement("div",null)),l.a.createElement("div",{className:"menu"},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("ul",{onClick:function(e){"unclickable"!==e.target.className&&(!0===document.querySelector(".toggler").checked&&(document.querySelector(".toggler").checked=!1))}},l.a.createElement("li",null,l.a.createElement(s.c,{to:"/koti",className:"menu-item",activeClassName:"active"},"Etusivu")),l.a.createElement("li",null,l.a.createElement(s.c,{to:"/turnaukset",className:"menu-item",activeClassName:"active"},"Turnaukset")),e?l.a.createElement("li",null,l.a.createElement(s.c,{to:"/admin/vaihda-salasana",className:"menu-item",activeClassName:"active"},"Vaihda salasana")):null,l.a.createElement("li",null,e?l.a.createElement(m,null):l.a.createElement(s.c,{to:"/kirjaudu",className:"menu-item",activeClassName:"active"},"Kirjaudu")))))))}var d=function(){return l.a.createElement("header",null,l.a.createElement("img",{src:"/assets/img/logo.png",alt:"RKC-logo",className:"logo"}),l.a.createElement("h1",null,"RKC-Volley"),l.a.createElement(i,null))},h=a(80),E=a(81),f=a(87),p=a(82),b=a(89),g=function(){return l.a.createElement("footer",null,l.a.createElement("p",null,l.a.createElement("i",{className:"far fa-copyright"})," Niko Hienonen"))},v=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"landing"},l.a.createElement("img",{src:"/assets/img/logo.png",alt:"RKC-logo"}),l.a.createElement("h1",null,"Lentopallopalvelut")),l.a.createElement(g,null))}}]),t}(n.Component),k=function(){return l.a.createElement("div",{class:"404"},"404, page not found.")},O=a(3),j=Object(n.createContext)();function y(e){var t=Object(n.useState)([]),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useContext)(j),u=c.getTournaments;return Object(n.useEffect)((function(){0===r.length&&u((function(e){e&&o(e)}))})),l.a.createElement("div",null,l.a.createElement("h1",null,"Turnaukset"),l.a.createElement("div",null,0===r.length?l.a.createElement("div",{className:"m3-container"},l.a.createElement("p",null,"Ei turnauksia viel\xe4!")):l.a.createElement("div",{className:"tournaments"},l.a.createElement("ul",null,r.map((function(t){return l.a.createElement("li",{key:t._id},l.a.createElement("button",{className:"card",onClick:function(){c.setTournamentId(t._id),e.history.push("/turnaukset/"+t._id)}},t.name))})))),l.a.createElement(s.b,{to:"/turnaukset/uusi"},"Lis\xe4\xe4 uusi")))}function N(e){var t=e.link;return l.a.createElement(s.b,{to:t,className:"back-button"},"Palaa")}var w=a(11),x=a.n(w);function S(){var e=sessionStorage.getItem("currentAuthData");return{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}}function C(e){x.a.get("/api/tournaments",S()).then((function(t){e(t.data.tournaments)})).catch((function(e){return console.log(e)}))}function P(e,t){x.a.get("/api/tournaments/".concat(e),S()).then((function(e){t(e.data.tournament)})).catch((function(e){return console.log(e)}))}function T(e,t,a){x.a.delete("/api/tournaments/".concat(t,"/matches/").concat(e),S()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}function B(){return l.a.createElement(s.b,{to:"/turnaukset"},"Alkuun")}function R(){return l.a.createElement("div",{className:"m3-container"},l.a.createElement("h2",null,"Turnausta ei l\xf6ytynyt"),l.a.createElement(B,null))}function I(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(!0),u=Object(O.a)(c,2),m=u[0],i=u[1],d=Object(n.useContext)(j).getTournamentById;return Object(n.useEffect)((function(){if(!r||m){i(!1);var e=sessionStorage.getItem("tournamentId");e&&d(e,(function(e){console.log(e),o(e)}))}}),[]),l.a.createElement("div",{className:"card tournament"},r?l.a.createElement(n.Fragment,null,l.a.createElement("h1",null,r.name),l.a.createElement("div",null,l.a.createElement("p",null,r.location),l.a.createElement("p",null,function(e){var t,a,n=new Date(e);return console.log(n.getMonth()),console.log(n),"".concat(function(e){switch(console.log(e),e){case 1:return"Ma";case 2:return"Ti";case 3:return"Ke";case 4:return"To";case 5:return"Pe";case 6:return"La";case 7:return"Su";default:return""}}(n.getDay()),", ").concat(n.getDate(),"/").concat((a=n.getMonth(),0===a?1:a),"/").concat(n.getFullYear()," ").concat(n.getHours(),":").concat(0===(t=n.getMinutes())?"00":t)}(r.date)),l.a.createElement("div",{className:"actions"},l.a.createElement(s.b,{to:"/turnaukset/".concat(r.name,"/sarjataulukko")},"Sarjataulukko"),l.a.createElement(s.b,{to:"/turnaukset/".concat(r.name,"/otteluohjelma")},"Otteluohjelma"),l.a.createElement(s.b,{to:"/turnaukset/".concat(r.name,"/muokkaa")},"Muokkaa"),l.a.createElement("button",{className:"delete",onClick:function(){return t=r._id,a=function(t){console.log(t),alert(t.message?"Poisto ep\xe4onnistui":"Poisto Onnistui"),e.history.push("/turnaukset")},void x.a.delete("/api/tournaments/".concat(t),S()).then((function(e){a(e)})).catch((function(e){return a(e)}));var t,a}},"Poista")),l.a.createElement(N,{link:"/turnaukset"}))):l.a.createElement(R,null))}var A=a(35),M=a.n(A),L=(a(72),a(10)),D=a(9);function _(e,t,a){var l=e,r=Object(n.useState)(e),o=Object(O.a)(r,2),c=o[0],u=o[1],s=Object(n.useState)({}),m=Object(O.a)(s,2),i=m[0],d=m[1],h=Object(n.useState)(!1),E=Object(O.a)(h,2),f=E[0],p=E[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(e){!function(e,t){x.a.post("/api/tournaments/",e,S()).then((function(e){t(e.data)})).catch((function(e){return t(e)}))}(e,(function(e){alert(e.message?e.message:e.error),u(l),a.history.push("/turnaukset")}))}({name:c.name,date:c.date,location:c.location,defaultMatch:{maxRounds:Number(c.maxRounds),maxPoints:Number(c.maxPoints),timeOuts:Number(c.timeOuts),bestOfMaxRounds:c.bestOfMaxRounds,winByTwo:c.winByTwo}}),p(!1)):p(!1))}),[i]),{handleChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;u(Object(D.a)({},c,Object(L.a)({},e.target.name,t)))},handleDateChange:function(e){u(Object(D.a)({},c,{date:e}))},handleBlur:function(){var e=t(c);d(e)},submit:function(e){e.preventDefault();var a=t(c);d(a),p(!0)},errors:i,values:c,isSubmitting:f}}function K(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",e.location?e.location.length<3&&(t.location="Sijainnin pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.location="Sijainti on pakollinen",e.maxRounds?(0===e.maxRounds||e.maxRounds<0)&&(t.maxRounds="Er\xe4katon on oltava enemm\xe4n kuin nolla"):t.maxRounds="Er\xe4katto on pakollinen",e.maxPoints?(0===e.maxPoints||e.maxPoints<0)&&(t.maxPoints="Pistekaton on oltava enemm\xe4n kuin nolla"):t.maxPoints="Pistekatto on pakollinen",e.timeOuts||(t.timeOuts="Timeout on pakollinen"),t}var V={name:"",location:"",date:new Date,maxRounds:0,maxPoints:0,timeOuts:0,bestOfMaxRounds:!1,winByTwo:!1};function W(e){var t=_(V,K,e),a=t.handleChange,n=(t.handleTeamsChange,t.handleDateChange),r=t.handleBlur,o=t.submit,c=t.errors,u=t.values,s=t.isSubmitting;return l.a.createElement("div",null,l.a.createElement("h1",null,"Lis\xe4\xe4 uusi turnaus"),l.a.createElement("form",{onSubmit:o},l.a.createElement("label",null,"Nimi",l.a.createElement("input",{value:u.name,onChange:a,onBlur:r,className:c.name&&"error-input",type:"text",name:"name"})),c.name&&l.a.createElement("p",{className:"error-text"},c.name),l.a.createElement("label",null,"Sijainti",l.a.createElement("input",{value:u.location,onChange:a,onBlur:r,className:c.location&&"error-input",type:"text",name:"location"})),c.location&&l.a.createElement("p",{className:"error-text"},c.location),l.a.createElement("label",null,"Ajankohta",l.a.createElement(M.a,{selected:u.date,onSelect:function(e){n(e)},showTimeSelect:!0,dateFormat:"Pp"})),l.a.createElement("label",null,"Er\xe4katto",l.a.createElement("input",{value:u.maxRounds,onChange:a,onBlur:r,className:c.maxRounds&&"error-input",type:"number",name:"maxRounds"})),c.maxRounds&&l.a.createElement("p",{className:"error-text"},c.maxRounds),l.a.createElement("label",null,"Pistekatto",l.a.createElement("input",{value:u.maxPoints,onChange:a,onBlur:r,className:c.maxPoints&&"error-input",type:"number",name:"maxPoints"})),c.maxPoints&&l.a.createElement("p",{className:"error-text"},c.maxPoints),l.a.createElement("label",null,"Aikalis\xe4t per er\xe4",l.a.createElement("input",{value:u.timeOuts,onChange:a,onBlur:r,className:c.timeOuts&&"error-input",type:"number",name:"timeOuts"})),c.timeOuts&&l.a.createElement("p",{className:"error-text"},c.timeOuts),l.a.createElement("label",null,"Paras er\xe4katosta",l.a.createElement("input",{value:u.bestOfMaxRounds,onChange:a,onBlur:r,className:"checkbox",type:"checkbox",name:"bestOfMaxRounds"})),l.a.createElement("label",null,"Kahden erolla",l.a.createElement("input",{value:u.winByTwo,onChange:a,onBlur:r,className:"checkbox",type:"checkbox",name:"winByTwo"})),l.a.createElement("button",{disabled:s,type:"submit"},"Luo")),l.a.createElement(N,{className:"m3-container",link:"/turnaukset"}))}var F=a(86);function U(e){var t=e.teams,a=Object(F.a)(t).sort((function(e,t){var a=e.roundsWon,n=t.roundsWon;if(a!==n)return n-a;var l=e.pointsWon-e.pointsLost,r=t.pointsWon-t.pointsWon;return l!==r?l-r:void 0}));return l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"Joukkue"),l.a.createElement("th",null,"Ottelut"),l.a.createElement("th",null,"Voitot"),l.a.createElement("th",null,"Tasapelit"),l.a.createElement("th",null,"Tappiot"),l.a.createElement("th",null,"Er\xe4suhde"),l.a.createElement("th",null,"Pistesuhde"),l.a.createElement("th",null,"Sarjapisteet"))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:e._id},l.a.createElement("th",null,"".concat(t+1)),l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.gamesPlayed),l.a.createElement("td",null,e.gamesWon),l.a.createElement("td",null,e.gamesDraw),l.a.createElement("td",null,e.gamesLost),l.a.createElement("td",null,e.roundsWon," / ",e.roundsLost),l.a.createElement("td",null,function(e,t){var a=e-t;return a<0?a:"+".concat(a)}(e.pointsWon,e.pointsLost)),l.a.createElement("th",null,e.roundsWon))})))))}function J(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useContext)(j).getTournamentById;return Object(n.useEffect)((function(){if(!r){var e=sessionStorage.getItem("tournamentId");e&&c(e,(function(e){console.log(e),o(e)}))}}),[]),l.a.createElement("div",{className:"mb3-container"},l.a.createElement("h1",null,"Sarjataulukko"),r?r.teams&&0!==r.teams.length?l.a.createElement(n.Fragment,null,l.a.createElement(U,{teams:r.teams}),l.a.createElement(N,{link:"/turnaukset/".concat(r.name,"/")})):l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"m3-container"},l.a.createElement("p",null,"Turnauksessa ei ole viel\xe4 joukkueita.")),l.a.createElement("button",{onClick:function(){return e.history.goBack()}},"Palaa")):l.a.createElement(R,null))}function H(e){var t=e.matches;return l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Aika"),l.a.createElement("th",null,"Koti"),l.a.createElement("th",null),l.a.createElement("th",null,"Vieras"),l.a.createElement("th",null,"Tulos"),l.a.createElement("th",null,"Kentt\xe4"))),l.a.createElement("tbody",null,t.map((function(e){var t=e.homeTeam,a=e.visitorTeam,n=e.homeRoundsWon,r=e.visitorRoundsWon,o=e.refereeName,c=e.startingTime;return l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,c),l.a.createElement("td",null,t),l.a.createElement("td",null,"-"),l.a.createElement("td",null,a),l.a.createElement("th",null,"".concat(n," - ").concat(r)),l.a.createElement("td",null,o))})))))}function q(){var e=Object(n.useState)(null),t=Object(O.a)(e,2),a=t[0],r=t[1],o=Object(n.useContext)(j).getTournamentById;return Object(n.useEffect)((function(){if(!a){var e=sessionStorage.getItem("tournamentId");e&&o(e,(function(e){console.log(e),r(e)}))}}),[]),l.a.createElement("div",null,a?l.a.createElement(n.Fragment,null,l.a.createElement("h1",null,"Otteluohjelma"),a.matches&&0!==a.matches.length?l.a.createElement(H,{matches:a.matches}):l.a.createElement("p",null,"Turnauksessa ei ole viel\xe4 otteluita."),l.a.createElement("div",{className:"m3-container"},l.a.createElement(N,{link:"/turnaukset/".concat(a.name,"/")}))):l.a.createElement(R,null))}function Y(e){var t=e.name,a=e.attribute,n="/turnaukset/".concat(t,"/muokkaa/").concat(a);return l.a.createElement("button",{className:"menu-button"},l.a.createElement(s.b,{to:n},a))}function z(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useContext)(j).getTournamentById;return Object(n.useEffect)((function(){if(!r){var e=sessionStorage.getItem("tournamentId");e&&c(e,(function(e){console.log(e),o(e)}))}}),[]),l.a.createElement("div",null,r?l.a.createElement("div",{className:"modify-menu"},l.a.createElement("h1",null,"Muokkaa turnausta: ",r.name),l.a.createElement("div",{className:"menu-buttons"},l.a.createElement(Y,{name:r.name,attribute:"Yleinen"}),l.a.createElement(Y,{name:r.name,attribute:"Joukkueet"}),l.a.createElement(Y,{name:r.name,attribute:"Tuomarit"}),l.a.createElement(Y,{name:r.name,attribute:"Ottelut"})),l.a.createElement(N,{link:"/turnaukset/".concat(r.name)})):l.a.createElement(R,null))}function $(e,t,a,l){var r=Object(n.useState)(e),o=Object(O.a)(r,2),c=o[0],u=o[1],s=Object(n.useState)({}),m=Object(O.a)(s,2),i=m[0],d=m[1],h=Object(n.useState)(!1),E=Object(O.a)(h,2),f=E[0],p=E[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(e){!function(e,t,a){x.a.patch("/api/tournaments/".concat(e),t,S()).then((function(e){a(e)})).catch((function(e){return a(e)}))}(a,e,(function(e){alert(e.data?e.data.message:"P\xe4ivitys  ep\xe4onnistui"),l()}))}({name:c.name,date:c.date,location:c.location,defaultMatch:{maxRounds:Number(c.maxRounds),maxPoints:Number(c.maxPoints),timeOuts:Number(c.timeOuts),bestOfMaxRounds:c.bestOfMaxRounds,winByTwo:c.winByTwo}}),p(!1)):p(!1))}),[i]),{handleChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;u(Object(D.a)({},c,Object(L.a)({},e.target.name,t)))},handleDateChange:function(e){u(Object(D.a)({},c,{date:e}))},handleBlur:function(){var e=t(c);d(e)},submit:function(e){e.preventDefault();var a=t(c);d(a),p(!0)},errors:i,values:c,isSubmitting:f}}function G(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",e.location?e.location.length<3&&(t.location="Sijainnin pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.location="Sijainti on pakollinen",e.maxRounds?(0===e.maxRounds||e.maxRounds<0)&&(t.maxRounds="Er\xe4katon on oltava enemm\xe4n kuin nolla"):t.maxRounds="Er\xe4katto on pakollinen",e.maxPoints?(0===e.maxPoints||e.maxPoints<0)&&(t.maxPoints="Pistekaton on oltava enemm\xe4n kuin nolla"):t.maxPoints="Pistekatto on pakollinen",e.timeOuts||(t.timeOuts="Timeout on pakollinen"),t}function Q(e){var t=e.tournament,a=e.id,n=e.navigate,r=$({name:t.name,location:t.location,date:new Date(t.date),maxRounds:t.defaultMatch.maxRounds,maxPoints:t.defaultMatch.maxPoints,timeOuts:t.defaultMatch.timeOuts,bestOfMaxRounds:t.defaultMatch.bestOfMaxRounds,winByTwo:t.defaultMatch.winByTwo},G,a,n),o=r.handleChange,c=r.handleDateChange,u=r.handleBlur,s=r.submit,m=r.errors,i=r.values,d=r.isSubmitting,h=r.dbError;var E="/turnaukset/".concat(t.name,"/muokkaa/");return l.a.createElement("div",{className:"generic-container"},l.a.createElement("div",{className:"modify"},l.a.createElement("h1",null,"Muokkaa yleisi\xe4 tietoja"),l.a.createElement("form",{onSubmit:s},l.a.createElement("label",{style:{display:"block"}},"Nimi:",l.a.createElement("input",{value:i.name,onChange:o,onBlur:u,className:m.name&&"error-input",type:"text",name:"name",placeholder:t.name})),m.name&&l.a.createElement("p",{className:"error-text"},m.name),l.a.createElement("label",{style:{display:"block"}},"Sijainti:",l.a.createElement("input",{value:i.location,onChange:o,onBlur:u,className:m.location&&"error-input",type:"text",name:"location",placeholder:t.location})),m.location&&l.a.createElement("p",{className:"error-text"},m.location),l.a.createElement("label",{style:{display:"block"}},"Ajankohta:",l.a.createElement(M.a,{selected:i.date,onSelect:function(e){c(e)},showTimeSelect:!0,dateFormat:"Pp"})),l.a.createElement("label",{style:{display:"block"}},"Er\xe4katto:",l.a.createElement("input",{value:i.maxRounds,onChange:o,onBlur:u,className:m.maxRounds&&"error-input",type:"number",name:"maxRounds"})),m.maxRounds&&l.a.createElement("p",{className:"error-text"},m.maxRounds),l.a.createElement("label",{style:{display:"block"}},"PisteKatto:",l.a.createElement("input",{value:i.maxPoints,onChange:o,onBlur:u,className:m.maxPoints&&"error-input",type:"number",name:"maxPoints"})),m.maxPoints&&l.a.createElement("p",{className:"error-text"},m.maxPoints),l.a.createElement("label",{style:{display:"block"}},"Timeoutit per er\xe4:",l.a.createElement("input",{value:i.timeOuts,onChange:o,onBlur:u,className:m.timeOuts&&"error-input",type:"number",name:"timeOuts"})),m.timeOuts&&l.a.createElement("p",{className:"error-text"},m.timeOuts),l.a.createElement("label",{style:{display:"block"}},"Paras et\xe4katosta:",l.a.createElement("input",{value:i.bestOfMaxRounds,onChange:o,onBlur:u,className:"checkbox",type:"checkbox",name:"bestOfMaxRounds"})),l.a.createElement("label",{style:{display:"block"}},"Kahden erolla:",l.a.createElement("input",{value:i.winByTwo,onChange:o,onBlur:u,className:"checkbox",type:"checkbox",name:"winByTwo"})),l.a.createElement("button",{disabled:d,type:"submit"},"Tallenna"),h&&l.a.createElement("p",{className:"error-text"},h))),l.a.createElement(N,{link:E}))}function X(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useContext)(j).getTournamentById;Object(n.useEffect)((function(){if(!r){var e=sessionStorage.getItem("tournamentId");e&&c(e,(function(e){o(e)}))}}),[]);return l.a.createElement("div",{className:"generic-container"},r?l.a.createElement(Q,{tournament:r,id:r._id,navigate:function(){e.history.push("/turnaukset/".concat(r.name,"/"))}}):l.a.createElement(R,null))}function Z(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",t}function ee(e,t,a,l){var r=Object(n.useState)(e),o=Object(O.a)(r,2),c=o[0],u=o[1],s=Object(n.useState)({}),m=Object(O.a)(s,2),i=m[0],d=m[1],h=Object(n.useState)(!1),E=Object(O.a)(h,2),f=E[0],p=E[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(e){!function(e,t,a){x.a.post("/api/tournaments/".concat(t,"/teams/addTeam"),e,S()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(e,a,(function(e){console.log(e),l()}))}({name:c.name}),p(!1)):p(!1))}),[i]),{handleChange:function(e){u(Object(D.a)({},c,Object(L.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(c);d(e)},submit:function(e){e.preventDefault();var a=t(c);d(a),p(!0)},errors:i,values:c,isSubmitting:f}}function te(e){var t=ee(e.INITIAL_VALUES,Z,e._id,e.toggleRefresh),a=t.handleChange,n=t.handleBlur,r=t.submit,o=t.errors,c=t.values,u=t.isSubmitting;return l.a.createElement("div",{className:"m3-container"},l.a.createElement("h2",null,"Lis\xe4\xe4 joukkue:"),l.a.createElement("form",{onSubmit:r},l.a.createElement("label",{style:{display:"block"}},"Nimi:",l.a.createElement("input",{value:c.name,onChange:a,onBlur:n,className:o.name&&"error-input",type:"text",name:"name"})),o.name&&l.a.createElement("p",{className:"error-text"},o.name),l.a.createElement("button",{disabled:u,type:"submit"},"Lis\xe4\xe4")))}function ae(e){var t=e.key1,a=e.team,n=e.id,r=e.toggleRefresh;return l.a.createElement("li",{key:t},l.a.createElement("h2",null,a.name),l.a.createElement("button",{className:"delete",onClick:function(){return function(e,t,a){x.a.delete("/api/tournaments/".concat(t,"/teams/").concat(e),S()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(a.name,n,(function(e){alert(e.err?e.err:"Poisto onnistui"),r()}))}},l.a.createElement("i",{className:"fas fa-trash-alt"})))}function ne(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useContext)(j).getTournamentById;Object(n.useEffect)((function(){if(!r){var e=sessionStorage.getItem("tournamentId");e&&c(e,(function(e){o(e)}))}}),[]);var u=function(){window.location.reload()};return l.a.createElement("div",null,l.a.createElement("h1",null,"Muokkaa joukkueita"),r?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"teams"},r.teams&&0!==r.teams.length?l.a.createElement("ul",null,r.teams.map((function(e){return l.a.createElement(ae,{team:e,id:r._id,toggleRefresh:u,key1:e._id})}))):l.a.createElement("p",null,"Ei joukkueita viel\xe4!"),l.a.createElement(te,{INITIAL_VALUES:{name:""},_id:r._id,toggleRefresh:u,navigate:function(){e.history.push("/turnaukset/".concat(r.name,"/"))}})),l.a.createElement(N,{link:"/turnaukset/".concat(r.name,"/muokkaa/")})):l.a.createElement(R,null))}function le(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",e.password?e.password.length<3&&(t.password="Salasanan pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.password="Salasana on pakollinen",t}function re(e,t,a,l){var r=Object(n.useState)(e),o=Object(O.a)(r,2),c=o[0],u=o[1],s=Object(n.useState)({}),m=Object(O.a)(s,2),i=m[0],d=m[1],h=Object(n.useState)(!1),E=Object(O.a)(h,2),f=E[0],p=E[1];return Object(n.useEffect)((function(){if(f)if(0===Object.keys(i).length){var e={referee:{name:c.name,password:c.password}};(function(e,t,a){x.a.patch("/api/tournaments/".concat(t,"/referees/add"),e,S()).then((function(e){a(e)})).catch((function(e){return a(e)}))})(e,a,(function(e){console.log(e),alert(e.err?"Lis\xe4ys ep\xe4onnistui":"Lis\xe4ys onnistui"),l()})),p(!1)}else p(!1)}),[i]),{handleChange:function(e){u(Object(D.a)({},c,Object(L.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(c);d(e)},submit:function(e){e.preventDefault();var a=t(c);d(a),p(!0)},errors:i,values:c,isSubmitting:f}}function oe(e){var t=re(e.INITIAL_VALUES,le,e._id,e.toggleRefresh),a=t.handleChange,n=t.handleBlur,r=t.submit,o=t.errors,c=t.values,u=t.isSubmitting;return l.a.createElement("div",{className:"m3-container"},l.a.createElement("h2",null,"Lis\xe4\xe4 tuomari:"),l.a.createElement("form",{onSubmit:r},l.a.createElement("label",{style:{display:"block"}},"Nimi:",l.a.createElement("input",{value:c.name,onChange:a,onBlur:n,className:o.name&&"error-input",type:"text",name:"name"})),o.name&&l.a.createElement("p",{className:"error-text"},o.name),l.a.createElement("label",{style:{display:"block"}},"Salasana:",l.a.createElement("input",{value:c.password,onChange:a,onBlur:n,className:o.name&&"error-input",type:"text",name:"password"})),o.password&&l.a.createElement("p",{className:"error-text"},o.password),l.a.createElement("button",{disabled:u,type:"submit"},"Tallenna")))}function ce(e){var t=e.referee,a=e.id,n=e.toggleRefresh;return l.a.createElement("div",{className:"referee card"},l.a.createElement("p",null,"Nimi: ",t.name),l.a.createElement("button",{onClick:function(){return function(e,t,a){x.a.delete("/api/tournaments/".concat(t,"/referees/").concat(e.name),S()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(t,a,(function(e){alert(e.err?"Poisto ep\xe4onnistui":"Poisto onnistui"),n()}))}},l.a.createElement("i",{className:"fas fa-trash-alt"})))}function ue(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useContext)(j).getTournamentById;Object(n.useEffect)((function(){if(!r){var e=sessionStorage.getItem("tournamentId");e&&c(e,(function(e){o(e)}))}}),[]);var u=function(){window.location.reload()};return l.a.createElement("div",null,l.a.createElement("h1",null,"Muokkaa tuomareita"),r?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"teams"},r.referees&&0!==r.referees.length?l.a.createElement("ul",null,r.referees.map((function(e,t){return l.a.createElement("li",{key:t},l.a.createElement(ce,{referee:e,id:r._id,toggleRefresh:u}))}))):l.a.createElement("p",null,"Ei tuomareita"),l.a.createElement(oe,{INITIAL_VALUES:{name:"",password:""},_id:r._id,toggleRefresh:u,navigate:function(){e.history.push("/turnaukset/".concat(r.name,"/"))}})),l.a.createElement(N,{link:"/turnaukset/".concat(r.name,"/muokkaa/")})):l.a.createElement(R,null))}function se(e){var t=e.id,a=e.matches,n=e.deleteMatchById,r=e.toggleRefresh;return l.a.createElement("div",{className:"table-container"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Aika"),l.a.createElement("th",null,"Koti"),l.a.createElement("th",null),l.a.createElement("th",null,"Vieras"),l.a.createElement("th",null,"Tulos"),l.a.createElement("th",null,"Kentt\xe4"),l.a.createElement("th",null,"Poista"))),l.a.createElement("tbody",null,a.map((function(e){var a=e.homeTeam,o=e.visitorTeam,c=e.homeRoundsWon,u=e.visitorRoundsWon,s=e.startingTime,m=e.refereeName;return console.log(e),l.a.createElement("tr",{key:e._id},l.a.createElement("td",null,s),l.a.createElement("td",null,a),l.a.createElement("td",null,"-"),l.a.createElement("td",null,o),l.a.createElement("th",null,"".concat(c," - ").concat(u)),l.a.createElement("td",null,m),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){return n(e._id,t,(function(e){alert(e.err?"Poisto ep\xe4onnistui":"Poisto onnistui"),r()}))}},l.a.createElement("i",{className:"fas fa-trash-alt"}))))})))))}function me(e){var t={};return e.home||(t.home="Kotijoukkue on pakollinen"),e.visitor||(t.visitor="Vierasjoukkue on pakollinen"),e.refereeName||(t.refereeName="Tuomari on pakollinen"),t}function ie(e,t,a,l,r){var o=Object(n.useState)(t),c=Object(O.a)(o,2),u=c[0],s=c[1],m=Object(n.useState)({}),i=Object(O.a)(m,2),d=i[0],h=i[1],E=Object(n.useState)(!1),f=Object(O.a)(E,2),p=f[0],b=f[1];return Object(n.useEffect)((function(){p&&(0===Object.keys(d).length?u.home===u.visitor?alert("Joukkue ei voi pelata itse\xe4\xe4n vastaan"):(!function(e){console.log(e),t=e,a=l,n=function(e){console.log(e),alert(e.err?"Lis\xe4ys ep\xe4onnistui":"Lis\xe4ys onnistui"),r()},x.a.post("/api/tournaments/".concat(a,"/matches/"),t,S()).then((function(e){return n(e)})).catch((function(e){return n(e)}));var t,a,n}({match:{homeTeam:u.home,visitorTeam:u.visitor,refereeName:u.refereeName,startingTime:u.startingTime,defaultMatch:e}}),b(!1)):b(!1))}),[d]),{handleChange:function(e){console.log(e),s(Object(D.a)({},u,Object(L.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=a(u);h(e)},handleTimeChange:function(e){s(Object(D.a)({},u,{startingTime:e}))},submit:function(e){e.preventDefault();var t=a(u);h(t),b(!0)},errors:d,values:u,isSubmitting:p}}var de=a(85),he=a.n(de);function Ee(e){var t=e.array,a=e.value,n=e.onChange,r=e.name;return l.a.createElement("select",{value:a,onChange:n,name:r},t.map((function(e){return l.a.createElement("option",{value:e.name},e.name)})))}function fe(e){var t=e.tournament,a=(e.navigate,e.toggleRefresh),n={home:t.teams[0].name,visitor:t.teams[0].name,refereeName:t.referees[0].name,startingTime:"10:00"},r=ie(t.defaultMatch,n,me,t._id,a),o=r.handleChange,c=r.handleBlur,u=r.handleTimeChange,s=r.submit,m=r.errors,i=r.values,d=r.isSubmitting;return l.a.createElement("div",{className:"m3-container"},l.a.createElement("h2",null,"Lis\xe4\xe4 ottelu:"),l.a.createElement("form",{onSubmit:s,onBlur:c},l.a.createElement("label",{style:{display:"block"}},"Koti:",l.a.createElement(Ee,{className:m.home&&"error-input",array:t.teams,value:i.home,onChange:o,name:"home"})),m.home&&l.a.createElement("p",{className:"error-text"},m.home),l.a.createElement("label",{style:{display:"block"}},"Vieras:",l.a.createElement(Ee,{className:m.visitor&&"error-input",array:t.teams,value:i.visitor,onChange:o,name:"visitor"})),m.visitor&&l.a.createElement("p",{className:"error-text"},m.visitor),l.a.createElement("label",{style:{display:"block"}},"Aika:",l.a.createElement(he.a,{onChange:u,value:i.startingTime,disableClock:!0})),m.startingTime&&l.a.createElement("p",{className:"error-text"},m.startingTime),l.a.createElement("label",{style:{display:"block"}},"Tuomari:",l.a.createElement(Ee,{className:m.referee&&"error-input",array:t.referees,value:i.refereeName,onChange:o,name:"refereeName"})),m.refereeName&&l.a.createElement("p",{className:"error-text"},m.refereeName),l.a.createElement("button",{disabled:d,type:"submit"},"Tallenna")))}function pe(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1],c=Object(n.useContext)(j).getTournamentById;Object(n.useEffect)((function(){if(!r){var e=sessionStorage.getItem("tournamentId");e&&c(e,(function(e){o(e)}))}}),[]);var u=function(){window.location.reload()};return l.a.createElement("div",null,l.a.createElement("h1",null,"Muokkaa otteluita"),r?l.a.createElement(n.Fragment,null,r.matches&&0!==r.matches.length?l.a.createElement(se,{matches:r.matches,deleteMatchById:T,toggleRefresh:u,id:r._id}):l.a.createElement("p",null,"Ei otteluita viel\xe4!"),l.a.createElement("div",{className:"m3-container"},r.teams&&0!==r.teams.length?r.referees&&0!==r.referees.length?l.a.createElement(fe,{tournament:r,toggleRefresh:u,navigate:function(){e.history.push("/turnaukset/".concat(r.name,"/"))}}):l.a.createElement("h3",null,"Ottelun lis\xe4\xe4miseen vaaditaan v\xe4hint\xe4\xe4n yksi tuomari, lis\xe4\xe4 se ensin"):l.a.createElement("h3",null,"Ottelun lis\xe4\xe4miseen vaaditaan joukkueita, lis\xe4\xe4 niit\xe4 ensin")),l.a.createElement("div",{className:"m3-container"},l.a.createElement(N,{link:"/turnaukset/".concat(r.name,"/muokkaa/")}))):l.a.createElement(R,null))}var be=Object(n.createContext)(null),ge=function(){return Object(n.useContext)(be)},ve=function(e){var t=Object(n.useState)(null),a=Object(O.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){var e=sessionStorage.getItem("currentAuthData");console.log(e),e&&o(e)}),[]);var c={authData:r,onLogin:function(e,t){o(e),sessionStorage.setItem("currentAuthData",e),sessionStorage.setItem("adminId",t)},onLogout:function(){o(null),sessionStorage.clear()}};return l.a.createElement(be.Provider,Object.assign({value:c},e))};function ke(e,t,a){var l=Object(n.useState)(e),r=Object(O.a)(l,2),o=r[0],c=r[1],u=Object(n.useState)({}),s=Object(O.a)(u,2),m=s[0],i=s[1],d=Object(n.useState)(!1),h=Object(O.a)(d,2),E=h[0],f=h[1];console.log(ge);var p=ge().onLogin;return Object(n.useEffect)((function(){var e,t;E&&(0===Object.keys(m).length?(e={username:o.username,password:o.password},t=function(e){console.log(e.status),200===e.status?(p(e.data.token,e.data.id),a()):alert("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4 tai salasana")},x.a.post("/api/admin/login",e).then((function(e){return t(e)})).catch((function(e){return t(e)})),f(!1)):f(!1))}),[m]),{handleChange:function(e){c(Object(D.a)({},o,Object(L.a)({},e.target.name,e.target.value)))},handleBlur:function(){t(o)},submit:function(e){e.preventDefault();var a=t(o);i(a),f(!0)},errors:m,values:o,isSubmitting:E}}function Oe(e){var t={};return e.username?e.username.length<4&&(t.username="K\xe4ytt\xe4j\xe4n pituus on oltava v\xe4hint\xe4\xe4n 4 merkki\xe4"):t.username="K\xe4ytt\xe4j\xe4 on pakollinen",e.password?e.password.length<6&&(t.password="Salasanan pituus on oltava v\xe4hint\xe4\xe4n 6 merkki\xe4"):t.password="Salasana on pakollinen",t}var je={username:"",password:""};function ye(e){var t=ke(je,Oe,(function(){e.history.push("/"),window.location.reload()})),a=t.handleChange,n=t.handleBlur,r=t.submit,o=t.errors,c=t.values,u=t.isSubmitting;return l.a.createElement("form",{className:"admin-login",onSubmit:r},l.a.createElement("input",{name:"username",value:c.username,onChange:a,onBlur:n,placeholder:"K\xe4ytt\xe4j\xe4"}),l.a.createElement("p",{className:"errorMsg"},o.username),l.a.createElement("input",{name:"password",value:c.password,onChange:a,onBlur:n,placeholder:"Salasana",type:"password"}),l.a.createElement("p",{className:"errorMsg"},o.password),l.a.createElement("button",{className:"submit",disabled:u},"KIRJAUDU"))}function Ne(e,t,a,l){var r=Object(n.useState)(e),o=Object(O.a)(r,2),c=o[0],u=o[1],s=Object(n.useState)({}),m=Object(O.a)(s,2),i=m[0],d=m[1],h=Object(n.useState)(!1),E=Object(O.a)(h,2),f=E[0],p=E[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(){var e={password:c.password,newPassword:c.newPassword};!function(e,t,a){var n={password:t.password,newPassword:t.newPassword};x.a.patch("/api/admin/".concat(e,"/"),n,S()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(l,e,(function(e){console.log(e.status),200===e.status?(alert("Salasana vaihdettu"),a()):alert("V\xe4\xe4r\xe4 salasana")}))}(),p(!1)):p(!1))}),[i]),{handleChange:function(e){u(Object(D.a)({},c,Object(L.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(c);d(e)},submit:function(e){e.preventDefault();var a=t(c);d(a),p(!0)},errors:i,values:c,isSubmitting:f}}function we(e){var t={};return e.password?e.password.length<4&&(t.password="Vanhan salasanan pituus on v\xe4hint\xe4\xe4n 6 merkki\xe4"):t.password="Vanha salasana on pakollinen",e.newPassword?e.newPassword.length<6&&(t.newPassword="Uuden salasanan pituus on v\xe4hint\xe4\xe4n 6 merkki\xe4"):t.newPassword="Uusi salasana on pakollinen",e.newPasswordAgain?e.newPasswordAgain.length<6?t.newPasswordAgain="Salasanan vahvistuksen pituus on v\xe4hint\xe4\xe4n 6 merkki\xe4":e.newPassword!==e.newPasswordAgain&&(t.newPasswordAgain="Salasanat eiv\xe4t t\xe4sm\xe4\xe4"):t.newPasswordAgain="Vahvista salasana",t}var xe={password:"",newPassword:"",newPasswordAgain:""};function Se(e){var t=sessionStorage.getItem("adminId"),a=Ne(xe,we,(function(){e.history.push("/"),window.location.reload()}),t),n=a.handleChange,r=a.handleBlur,o=a.submit,c=a.errors,u=a.values,s=a.isSubmitting;return l.a.createElement("form",{className:"change-pass",onSubmit:o},l.a.createElement("input",{name:"password",value:u.password,onChange:n,onBlur:r,placeholder:"Vanha salasana",type:"password"}),l.a.createElement("p",{className:"errorMsg"},c.password),l.a.createElement("input",{name:"newPassword",value:u.newPassword,onChange:n,onBlur:r,placeholder:"Uusi salasana",type:"password"}),l.a.createElement("p",{className:"errorMsg"},c.newPassword),l.a.createElement("input",{name:"newPasswordAgain",value:u.newPasswordAgain,onChange:n,onBlur:r,placeholder:"Vahvista uusi salasana",type:"password"}),l.a.createElement("p",{className:"errorMsg"},c.newPasswordAgain),l.a.createElement("button",{className:"submit",disabled:s},"VAIHDA SALASANA"))}var Ce=function(e){return l.a.createElement(j.Provider,{value:{setTournamentId:function(e){sessionStorage.setItem("tournamentId",e)},getTournamentById:P,getTournaments:C}},e.children)};function Pe(e){var t=e.component,a=Object(c.a)(e,["component"]),n=ge().authData?t:ye;return l.a.createElement(u.a,Object.assign({},a,{component:n}))}var Te=function(){return l.a.createElement(ve,null,l.a.createElement(s.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(d,null),l.a.createElement("div",{className:"body-container"},l.a.createElement(Ce,null,l.a.createElement(u.c,null,l.a.createElement(Pe,{exact:!0,path:"/",component:v}),l.a.createElement(Pe,{exact:!0,path:"/koti",component:v}),l.a.createElement(Pe,{exact:!0,path:"/turnaukset",component:y}),l.a.createElement(Pe,{exact:!0,path:"/turnaukset/uusi",component:W}),l.a.createElement(Pe,{exact:!0,path:"/turnaukset/:name/sarjataulukko",component:J}),l.a.createElement(Pe,{excat:!0,path:"/turnaukset/:name/otteluohjelma",component:q}),l.a.createElement(Pe,{excat:!0,path:"/turnaukset/:name/muokkaa/yleinen",component:X}),l.a.createElement(Pe,{exact:!0,path:"/turnaukset/:name",component:I}),l.a.createElement(Pe,{exact:!0,path:"/turnaukset/:name/muokkaa/joukkueet",component:ne}),l.a.createElement(Pe,{excat:!0,path:"/turnaukset/:name/muokkaa/tuomarit",component:ue}),l.a.createElement(Pe,{exact:!0,path:"/turnaukset/:name/muokkaa/ottelut",component:pe}),l.a.createElement(Pe,{excat:!0,path:"/turnaukset/:name/muokkaa",component:z}),l.a.createElement(Pe,{exact:!0,path:"/admin/vaihda-salasana",component:Se}),l.a.createElement(Pe,{exact:!0,path:"/kirjaudu",component:ye}),l.a.createElement(Pe,{component:k})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t,a){e.exports=a(194)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.650a1dfa.chunk.js.map