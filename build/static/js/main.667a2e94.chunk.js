(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),o=a.n(l),u=a(89),c=a(22),s=a(8);a(96);function m(){return r.a.createElement("button",{className:"menu-item",onClick:function(){sessionStorage.clear(),window.location.reload()}},"Kirjaudu ulos")}function i(){var e=sessionStorage.getItem("currentAuthData");return r.a.createElement("div",{className:"menu-wrap"},r.a.createElement("input",{type:"checkbox",className:"toggler"}),r.a.createElement("div",{className:"hamburger"},r.a.createElement("div",null)),r.a.createElement("div",{className:"menu"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("ul",{onClick:function(e){"unclickable"!==e.target.className&&(!0===document.querySelector(".toggler").checked&&(document.querySelector(".toggler").checked=!1))}},r.a.createElement("li",null,r.a.createElement(s.c,{to:"/koti",className:"menu-item",activeClassName:"active"},"Etusivu")),r.a.createElement("li",null,r.a.createElement(s.c,{to:"/turnaukset",className:"menu-item",activeClassName:"active"},"Turnaukset/Sarjat")),e?r.a.createElement("li",null,r.a.createElement(s.c,{to:"/admin/vaihda-salasana",className:"menu-item",activeClassName:"active"},"Vaihda salasana")):null,r.a.createElement("li",null,e?r.a.createElement(m,null):r.a.createElement(s.c,{to:"/kirjaudu",className:"menu-item",activeClassName:"active"},"Kirjaudu")))))))}var d=function(){return r.a.createElement("header",null,r.a.createElement("img",{src:"/assets/img/logo.png",alt:"RKC-logo",className:"logo"}),r.a.createElement("h1",null,"RKC-Volley"),r.a.createElement(i,null))},E=a(83),h=a(84),f=a(90),p=a(88),b=function(){return r.a.createElement("footer",null,r.a.createElement("p",null,r.a.createElement("i",{className:"far fa-copyright"})," Niko Hienonen"))},v=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"landing"},r.a.createElement("img",{src:"/assets/img/logo.png",alt:"RKC-logo"}),r.a.createElement("h1",null,"Lentopallopalvelut")),r.a.createElement(b,null))}}]),a}(n.Component),g=function(){return r.a.createElement("div",{class:"404"},"404, page not found.")},k=a(3),O=Object(n.createContext)();function j(e){var t=Object(n.useState)([]),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O),c=u.getTournaments,m=sessionStorage.getItem("adminId");return Object(n.useEffect)((function(){0===l.length&&c((function(e){e&&o(e)}))})),r.a.createElement("div",null,r.a.createElement("h1",null,"Turnaukset/Sarjat"),r.a.createElement("div",null,0===l.length?r.a.createElement("div",{className:"m3-container"},r.a.createElement("p",null,"Ei turnauksia viel\xe4!")):r.a.createElement("div",{className:"tournaments"},r.a.createElement("ul",null,l.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement("button",{className:"card",onClick:function(){u.setTournamentId(t._id),e.history.push("/turnaukset/"+t._id)}},t.name))})))),m?r.a.createElement(s.b,{to:"/turnaukset/uusi"},"Lis\xe4\xe4 uusi"):null))}function y(e){var t=e.link;return r.a.createElement(s.b,{to:t,className:"back-button"},"Palaa")}var N=a(11),w=a.n(N);function x(){var e=sessionStorage.getItem("currentAuthData");return{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}}function S(e){w.a.get("/api/tournaments",x()).then((function(t){e(t.data.tournaments)})).catch((function(t){return e(t)}))}function C(e,t){w.a.get("/api/tournaments/".concat(e),x()).then((function(e){t(e.data.tournament)})).catch((function(e){return t(e)}))}function P(e,t,a){w.a.delete("/api/tournaments/".concat(t,"/matches/").concat(e),x()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}function T(){return r.a.createElement(s.b,{to:"/turnaukset"},"Alkuun")}function B(){return r.a.createElement("div",{className:"m3-container"},r.a.createElement("h2",null,"Turnausta ei l\xf6ytynyt"),r.a.createElement(T,null))}function I(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O).getTournamentById,c=sessionStorage.getItem("adminId");return Object(n.useEffect)((function(){if(!l){var e=sessionStorage.getItem("tournamentId");e&&u(e,(function(e){o(e)}))}})),r.a.createElement("div",{className:"card tournament"},l?r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,l.name),r.a.createElement("div",null,r.a.createElement("p",null,l.location),r.a.createElement("p",null,function(e){var t,a,n=new Date(e);return"".concat(function(e){switch(console.log(e),e){case 1:return"Ma, ";case 2:return"Ti, ";case 3:return"Ke, ";case 4:return"To, ";case 5:return"Pe, ";case 6:return"La, ";case 7:return"Su, ";default:return""}}(n.getDay())).concat(n.getDate(),"/").concat((a=n.getMonth(),0===a?1:a),"/").concat(n.getFullYear()," ").concat(n.getHours(),":").concat(0===(t=n.getMinutes())?"00":t)}(l.date)),r.a.createElement("div",{className:"actions"},r.a.createElement(s.b,{to:"/turnaukset/".concat(l.name,"/sarjataulukko")},"Sarjataulukko"),r.a.createElement(s.b,{to:"/turnaukset/".concat(l.name,"/otteluohjelma")},"Otteluohjelma"),c?r.a.createElement(n.Fragment,null,r.a.createElement(s.b,{to:"/turnaukset/".concat(l.name,"/muokkaa")},"Muokkaa"),r.a.createElement("button",{className:"delete",onClick:function(){return t=l._id,a=function(t){alert(t.message?"Poisto ep\xe4onnistui":"Poisto Onnistui"),e.history.push("/turnaukset")},void w.a.delete("/api/tournaments/".concat(t),x()).then((function(e){a(e)})).catch((function(e){return a(e)}));var t,a}},"Poista")):null),r.a.createElement(y,{link:"/turnaukset"}))):r.a.createElement(B,null))}var R=a(37),A=a.n(R),M=(a(75),a(10)),L=a(4);function D(e,t,a){var r=e,l=Object(n.useState)(e),o=Object(k.a)(l,2),u=o[0],c=o[1],s=Object(n.useState)({}),m=Object(k.a)(s,2),i=m[0],d=m[1],E=Object(n.useState)(!1),h=Object(k.a)(E,2),f=h[0],p=h[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(e){!function(e,t){w.a.post("/api/tournaments/",e,x()).then((function(e){t(e.data)})).catch((function(e){return t(e)}))}(e,(function(e){alert(e.message?e.message:e.error),c(r),a.history.push("/turnaukset")}))}({name:u.name,date:u.date,location:u.location,defaultMatch:{maxRounds:Number(u.maxRounds),maxPoints:Number(u.maxPoints),timeOuts:Number(u.timeOuts),bestOfMaxRounds:u.bestOfMaxRounds,winByTwo:u.winByTwo}}),p(!1)):p(!1))})),{handleChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;c(Object(L.a)(Object(L.a)({},u),{},Object(M.a)({},e.target.name,t)))},handleDateChange:function(e){c(Object(L.a)(Object(L.a)({},u),{},{date:e}))},handleBlur:function(){var e=t(u);d(e)},submit:function(e){e.preventDefault();var a=t(u);d(a),p(!0)},errors:i,values:u,isSubmitting:f}}function _(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",e.location?e.location.length<3&&(t.location="Sijainnin pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.location="Sijainti on pakollinen",e.maxRounds?(0===e.maxRounds||e.maxRounds<0)&&(t.maxRounds="Er\xe4katon on oltava enemm\xe4n kuin nolla"):t.maxRounds="Er\xe4katto on pakollinen",e.maxPoints?(0===e.maxPoints||e.maxPoints<0)&&(t.maxPoints="Pistekaton on oltava enemm\xe4n kuin nolla"):t.maxPoints="Pistekatto on pakollinen",e.timeOuts||(t.timeOuts="Timeout on pakollinen"),t}var K={name:"",location:"",date:new Date,maxRounds:0,maxPoints:0,timeOuts:0,bestOfMaxRounds:!1,winByTwo:!1};function V(e){var t=D(K,_,e),a=t.handleChange,n=t.handleDateChange,l=t.handleBlur,o=t.submit,u=t.errors,c=t.values,s=t.isSubmitting;return r.a.createElement("div",null,r.a.createElement("h1",null,"Lis\xe4\xe4 uusi turnaus"),r.a.createElement("form",{onSubmit:o},r.a.createElement("label",null,"Nimi",r.a.createElement("input",{value:c.name,onChange:a,onBlur:l,className:u.name&&"error-input",type:"text",name:"name"})),u.name&&r.a.createElement("p",{className:"error-text"},u.name),r.a.createElement("label",null,"Sijainti",r.a.createElement("input",{value:c.location,onChange:a,onBlur:l,className:u.location&&"error-input",type:"text",name:"location"})),u.location&&r.a.createElement("p",{className:"error-text"},u.location),r.a.createElement("label",null,"Ajankohta",r.a.createElement(A.a,{selected:c.date,onSelect:function(e){n(e)},showTimeSelect:!0,dateFormat:"Pp"})),r.a.createElement("label",null,"Er\xe4katto",r.a.createElement("input",{value:c.maxRounds,onChange:a,onBlur:l,className:u.maxRounds&&"error-input",type:"number",name:"maxRounds"})),u.maxRounds&&r.a.createElement("p",{className:"error-text"},u.maxRounds),r.a.createElement("label",null,"Pistekatto",r.a.createElement("input",{value:c.maxPoints,onChange:a,onBlur:l,className:u.maxPoints&&"error-input",type:"number",name:"maxPoints"})),u.maxPoints&&r.a.createElement("p",{className:"error-text"},u.maxPoints),r.a.createElement("label",null,"Aikalis\xe4t per er\xe4",r.a.createElement("input",{value:c.timeOuts,onChange:a,onBlur:l,className:u.timeOuts&&"error-input",type:"number",name:"timeOuts"})),u.timeOuts&&r.a.createElement("p",{className:"error-text"},u.timeOuts),r.a.createElement("label",null,"Paras er\xe4katosta",r.a.createElement("input",{value:c.bestOfMaxRounds,onChange:a,onBlur:l,className:"checkbox",type:"checkbox",name:"bestOfMaxRounds"})),r.a.createElement("label",null,"Kahden erolla",r.a.createElement("input",{value:c.winByTwo,onChange:a,onBlur:l,className:"checkbox",type:"checkbox",name:"winByTwo"})),r.a.createElement("button",{disabled:s,type:"submit"},"Luo")),r.a.createElement(y,{className:"m3-container",link:"/turnaukset"}))}var W=a(45);function F(e){var t=e.teams,a=Object(W.a)(t).sort((function(e,t){var a=e.gamesWon,n=t.gamesWon;if(a!==n)return n-a;var r=e.roundsWon,l=t.roundsWon;if(r!==l)return l-r;var o=e.pointsWon-e.pointsLost,u=t.pointsWon-t.pointsLost;return console.log(o,u),o!==u?u-o:void 0}));return r.a.createElement("div",{className:"table-container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Joukkue"),r.a.createElement("th",null,"Ottelut"),r.a.createElement("th",null,"Voitot"),r.a.createElement("th",null,"Tasapelit"),r.a.createElement("th",null,"Tappiot"),r.a.createElement("th",null,"Er\xe4suhde"),r.a.createElement("th",null,"Pistesuhde"),r.a.createElement("th",null,"Sarjapisteet"))),r.a.createElement("tbody",null,a.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",null,"".concat(t+1)),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.gamesPlayed),r.a.createElement("td",null,e.gamesWon),r.a.createElement("td",null,e.gamesDraw),r.a.createElement("td",null,e.gamesLost),r.a.createElement("td",null,e.roundsWon," / ",e.roundsLost),r.a.createElement("td",null,function(e,t){var a=e-t;return a<0?a:"+".concat(a)}(e.pointsWon,e.pointsLost)),r.a.createElement("th",null,e.roundsWon))})))))}function U(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O).getTournamentById;return Object(n.useEffect)((function(){if(!l){var e=sessionStorage.getItem("tournamentId");e&&u(e,(function(e){o(e)}))}})),r.a.createElement("div",{className:"mb3-container"},r.a.createElement("h1",null,"Sarjataulukko"),l?l.teams&&0!==l.teams.length?r.a.createElement(n.Fragment,null,r.a.createElement(F,{teams:l.teams}),r.a.createElement(y,{link:"/turnaukset/".concat(l.name,"/")})):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"m3-container"},r.a.createElement("p",null,"Turnauksessa ei ole viel\xe4 joukkueita.")),r.a.createElement("button",{onClick:function(){return e.history.goBack()}},"Palaa")):r.a.createElement(B,null))}function J(e){var t=e.matches;return r.a.createElement("div",{className:"table-container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Aika"),r.a.createElement("th",null,"Koti"),r.a.createElement("th",null),r.a.createElement("th",null,"Vieras"),r.a.createElement("th",null,"Tulos"),r.a.createElement("th",null,"Kentt\xe4"))),r.a.createElement("tbody",null,t.map((function(e){var t=e.homeTeam,a=e.visitorTeam,n=e.homeRoundsWon,l=e.visitorRoundsWon,o=e.refereeName,u=e.startingTime;return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,u),r.a.createElement("td",null,t),r.a.createElement("td",null,"-"),r.a.createElement("td",null,a),r.a.createElement("th",null,"".concat(n," - ").concat(l)),r.a.createElement("td",null,o))})))))}function H(){var e=Object(n.useState)(null),t=Object(k.a)(e,2),a=t[0],l=t[1],o=Object(n.useContext)(O).getTournamentById;return Object(n.useEffect)((function(){if(!a){var e=sessionStorage.getItem("tournamentId");e&&o(e,(function(e){l(e)}))}})),r.a.createElement("div",null,a?r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Otteluohjelma"),a.matches&&0!==a.matches.length?r.a.createElement(J,{matches:a.matches}):r.a.createElement("p",null,"Turnauksessa ei ole viel\xe4 otteluita."),r.a.createElement("div",{className:"m3-container"},r.a.createElement(y,{link:"/turnaukset/".concat(a.name,"/")}))):r.a.createElement(B,null))}function q(e){var t=e.name,a=e.attribute,n="/turnaukset/".concat(t,"/muokkaa/").concat(a);return r.a.createElement("button",{className:"menu-button"},r.a.createElement(s.b,{to:n},a))}function Y(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O).getTournamentById;return Object(n.useEffect)((function(){if(!l){var e=sessionStorage.getItem("tournamentId");e&&u(e,(function(e){o(e)}))}})),r.a.createElement("div",null,l?r.a.createElement("div",{className:"modify-menu"},r.a.createElement("h1",null,"Muokkaa turnausta: ",l.name),r.a.createElement("div",{className:"menu-buttons"},r.a.createElement(q,{name:l.name,attribute:"Yleinen"}),r.a.createElement(q,{name:l.name,attribute:"Joukkueet"}),r.a.createElement(q,{name:l.name,attribute:"Tuomarit"}),r.a.createElement(q,{name:l.name,attribute:"Ottelut"})),r.a.createElement(y,{link:"/turnaukset/".concat(l.name)})):r.a.createElement(B,null))}function z(e,t,a,r){var l=Object(n.useState)(e),o=Object(k.a)(l,2),u=o[0],c=o[1],s=Object(n.useState)({}),m=Object(k.a)(s,2),i=m[0],d=m[1],E=Object(n.useState)(!1),h=Object(k.a)(E,2),f=h[0],p=h[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(e){!function(e,t,a){w.a.patch("/api/tournaments/".concat(e),t,x()).then((function(e){a(e)})).catch((function(e){return a(e)}))}(a,e,(function(e){alert(e.data?e.data.message:"P\xe4ivitys  ep\xe4onnistui"),r()}))}({name:u.name,date:u.date,location:u.location,defaultMatch:{maxRounds:Number(u.maxRounds),maxPoints:Number(u.maxPoints),timeOuts:Number(u.timeOuts),bestOfMaxRounds:u.bestOfMaxRounds,winByTwo:u.winByTwo}}),p(!1)):p(!1))})),{handleChange:function(e){var t="checkbox"===e.target.type?e.target.checked:e.target.value;c(Object(L.a)(Object(L.a)({},u),{},Object(M.a)({},e.target.name,t)))},handleDateChange:function(e){c(Object(L.a)(Object(L.a)({},u),{},{date:e}))},handleBlur:function(){var e=t(u);d(e)},submit:function(e){e.preventDefault();var a=t(u);d(a),p(!0)},errors:i,values:u,isSubmitting:f}}function $(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",e.location?e.location.length<3&&(t.location="Sijainnin pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.location="Sijainti on pakollinen",e.maxRounds?(0===e.maxRounds||e.maxRounds<0)&&(t.maxRounds="Er\xe4katon on oltava enemm\xe4n kuin nolla"):t.maxRounds="Er\xe4katto on pakollinen",e.maxPoints?(0===e.maxPoints||e.maxPoints<0)&&(t.maxPoints="Pistekaton on oltava enemm\xe4n kuin nolla"):t.maxPoints="Pistekatto on pakollinen",e.timeOuts||(t.timeOuts="Timeout on pakollinen"),t}function G(e){var t=e.tournament,a=e.id,n=e.navigate,l=z({name:t.name,location:t.location,date:new Date(t.date),maxRounds:t.defaultMatch.maxRounds,maxPoints:t.defaultMatch.maxPoints,timeOuts:t.defaultMatch.timeOuts,bestOfMaxRounds:t.defaultMatch.bestOfMaxRounds,winByTwo:t.defaultMatch.winByTwo},$,a,n),o=l.handleChange,u=l.handleDateChange,c=l.handleBlur,s=l.submit,m=l.errors,i=l.values,d=l.isSubmitting,E=l.dbError;var h="/turnaukset/".concat(t.name,"/muokkaa/");return r.a.createElement("div",{className:"generic-container"},r.a.createElement("div",{className:"modify"},r.a.createElement("h1",null,"Muokkaa yleisi\xe4 tietoja"),r.a.createElement("form",{onSubmit:s},r.a.createElement("label",{style:{display:"block"}},"Nimi:",r.a.createElement("input",{value:i.name,onChange:o,onBlur:c,className:m.name&&"error-input",type:"text",name:"name",placeholder:t.name})),m.name&&r.a.createElement("p",{className:"error-text"},m.name),r.a.createElement("label",{style:{display:"block"}},"Sijainti:",r.a.createElement("input",{value:i.location,onChange:o,onBlur:c,className:m.location&&"error-input",type:"text",name:"location",placeholder:t.location})),m.location&&r.a.createElement("p",{className:"error-text"},m.location),r.a.createElement("label",{style:{display:"block"}},"Ajankohta:",r.a.createElement(A.a,{selected:i.date,onSelect:function(e){u(e)},showTimeSelect:!0,dateFormat:"Pp"})),r.a.createElement("label",{style:{display:"block"}},"Er\xe4katto:",r.a.createElement("input",{value:i.maxRounds,onChange:o,onBlur:c,className:m.maxRounds&&"error-input",type:"number",name:"maxRounds"})),m.maxRounds&&r.a.createElement("p",{className:"error-text"},m.maxRounds),r.a.createElement("label",{style:{display:"block"}},"PisteKatto:",r.a.createElement("input",{value:i.maxPoints,onChange:o,onBlur:c,className:m.maxPoints&&"error-input",type:"number",name:"maxPoints"})),m.maxPoints&&r.a.createElement("p",{className:"error-text"},m.maxPoints),r.a.createElement("label",{style:{display:"block"}},"Timeoutit per er\xe4:",r.a.createElement("input",{value:i.timeOuts,onChange:o,onBlur:c,className:m.timeOuts&&"error-input",type:"number",name:"timeOuts"})),m.timeOuts&&r.a.createElement("p",{className:"error-text"},m.timeOuts),r.a.createElement("label",{style:{display:"block"}},"Paras et\xe4katosta:",r.a.createElement("input",{value:i.bestOfMaxRounds,onChange:o,onBlur:c,className:"checkbox",type:"checkbox",name:"bestOfMaxRounds"})),r.a.createElement("label",{style:{display:"block"}},"Kahden erolla:",r.a.createElement("input",{value:i.winByTwo,onChange:o,onBlur:c,className:"checkbox",type:"checkbox",name:"winByTwo"})),r.a.createElement("button",{disabled:d,type:"submit"},"Tallenna"),E&&r.a.createElement("p",{className:"error-text"},E))),r.a.createElement(y,{link:h}))}function Q(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O).getTournamentById;Object(n.useEffect)((function(){if(!l){var e=sessionStorage.getItem("tournamentId");e&&u(e,(function(e){o(e)}))}}));return r.a.createElement("div",{className:"generic-container"},l?r.a.createElement(G,{tournament:l,id:l._id,navigate:function(){e.history.push("/turnaukset/".concat(l.name,"/"))}}):r.a.createElement(B,null))}function X(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",t}function Z(e,t,a,r){var l=Object(n.useState)(e),o=Object(k.a)(l,2),u=o[0],c=o[1],s=Object(n.useState)({}),m=Object(k.a)(s,2),i=m[0],d=m[1],E=Object(n.useState)(!1),h=Object(k.a)(E,2),f=h[0],p=h[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(e){!function(e,t,a){w.a.post("/api/tournaments/".concat(t,"/teams/addTeam"),e,x()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(e,a,(function(e){r()}))}({name:u.name}),p(!1)):p(!1))})),{handleChange:function(e){c(Object(L.a)(Object(L.a)({},u),{},Object(M.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(u);d(e)},submit:function(e){e.preventDefault();var a=t(u);d(a),p(!0)},errors:i,values:u,isSubmitting:f}}function ee(e){var t=Z(e.INITIAL_VALUES,X,e._id,e.toggleRefresh),a=t.handleChange,n=t.handleBlur,l=t.submit,o=t.errors,u=t.values,c=t.isSubmitting;return r.a.createElement("div",{className:"m3-container"},r.a.createElement("h2",null,"Lis\xe4\xe4 joukkue:"),r.a.createElement("form",{onSubmit:l},r.a.createElement("label",{style:{display:"block"}},"Nimi:",r.a.createElement("input",{value:u.name,onChange:a,onBlur:n,className:o.name&&"error-input",type:"text",name:"name"})),o.name&&r.a.createElement("p",{className:"error-text"},o.name),r.a.createElement("button",{disabled:c,type:"submit"},"Lis\xe4\xe4")))}function te(e){var t=e.key1,a=e.team,n=e.id,l=e.toggleRefresh;return r.a.createElement("li",{key:t},r.a.createElement("h2",null,a.name),r.a.createElement("button",{className:"delete",onClick:function(){return function(e,t,a){w.a.delete("/api/tournaments/".concat(t,"/teams/").concat(e),x()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(a.name,n,(function(e){alert(e.err?e.err:"Poisto onnistui"),l()}))}},r.a.createElement("i",{className:"fas fa-trash-alt"})))}function ae(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O).getTournamentById;Object(n.useEffect)((function(){if(!l){var e=sessionStorage.getItem("tournamentId");e&&u(e,(function(e){o(e)}))}}));var c=function(){window.location.reload()};return r.a.createElement("div",null,r.a.createElement("h1",null,"Muokkaa joukkueita"),l?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"teams"},l.teams&&0!==l.teams.length?r.a.createElement("ul",null,l.teams.map((function(e){return r.a.createElement(te,{team:e,id:l._id,toggleRefresh:c,key1:e._id})}))):r.a.createElement("p",null,"Ei joukkueita viel\xe4!"),r.a.createElement(ee,{INITIAL_VALUES:{name:""},_id:l._id,toggleRefresh:c,navigate:function(){e.history.push("/turnaukset/".concat(l.name,"/"))}})),r.a.createElement(y,{link:"/turnaukset/".concat(l.name,"/muokkaa/")})):r.a.createElement(B,null))}function ne(e){var t={};return e.name?e.name.length<3&&(t.name="Nimen pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.name="Nimi on pakollinen",e.password?e.password.length<3&&(t.password="Salasanan pituus on v\xe4hint\xe4\xe4n kolme merkki\xe4"):t.password="Salasana on pakollinen",t}function re(e,t,a,r){var l=Object(n.useState)(e),o=Object(k.a)(l,2),u=o[0],c=o[1],s=Object(n.useState)({}),m=Object(k.a)(s,2),i=m[0],d=m[1],E=Object(n.useState)(!1),h=Object(k.a)(E,2),f=h[0],p=h[1];return Object(n.useEffect)((function(){if(f)if(0===Object.keys(i).length){var e={referee:{name:u.name,password:u.password}};(function(e,t,a){w.a.patch("/api/tournaments/".concat(t,"/referees/add"),e,x()).then((function(e){a(e)})).catch((function(e){return a(e)}))})(e,a,(function(e){alert(e.err?"Lis\xe4ys ep\xe4onnistui":"Lis\xe4ys onnistui"),r()})),p(!1)}else p(!1)})),{handleChange:function(e){c(Object(L.a)(Object(L.a)({},u),{},Object(M.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(u);d(e)},submit:function(e){e.preventDefault();var a=t(u);d(a),p(!0)},errors:i,values:u,isSubmitting:f}}function le(e){var t=re(e.INITIAL_VALUES,ne,e._id,e.toggleRefresh),a=t.handleChange,n=t.handleBlur,l=t.submit,o=t.errors,u=t.values,c=t.isSubmitting;return r.a.createElement("div",{className:"m3-container"},r.a.createElement("h2",null,"Lis\xe4\xe4 tuomari:"),r.a.createElement("form",{onSubmit:l},r.a.createElement("label",{style:{display:"block"}},"Nimi:",r.a.createElement("input",{value:u.name,onChange:a,onBlur:n,className:o.name&&"error-input",type:"text",name:"name"})),o.name&&r.a.createElement("p",{className:"error-text"},o.name),r.a.createElement("label",{style:{display:"block"}},"Salasana:",r.a.createElement("input",{value:u.password,onChange:a,onBlur:n,className:o.name&&"error-input",type:"text",name:"password"})),o.password&&r.a.createElement("p",{className:"error-text"},o.password),r.a.createElement("button",{disabled:c,type:"submit"},"Tallenna")))}function oe(e){var t=e.referee,a=e.id,n=e.toggleRefresh;return r.a.createElement("div",{className:"referee card"},r.a.createElement("p",null,"Nimi: ",t.name),r.a.createElement("button",{onClick:function(){return function(e,t,a){w.a.delete("/api/tournaments/".concat(t,"/referees/").concat(e.name),x()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(t,a,(function(e){alert(e.err?"Poisto ep\xe4onnistui":"Poisto onnistui"),n()}))}},r.a.createElement("i",{className:"fas fa-trash-alt"})))}function ue(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O).getTournamentById;Object(n.useEffect)((function(){if(!l){var e=sessionStorage.getItem("tournamentId");e&&u(e,(function(e){o(e)}))}}));var c=function(){window.location.reload()};return r.a.createElement("div",null,r.a.createElement("h1",null,"Muokkaa tuomareita"),l?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"teams"},l.referees&&0!==l.referees.length?r.a.createElement("ul",null,l.referees.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(oe,{referee:e,id:l._id,toggleRefresh:c}))}))):r.a.createElement("p",null,"Ei tuomareita"),r.a.createElement(le,{INITIAL_VALUES:{name:"",password:""},_id:l._id,toggleRefresh:c,navigate:function(){e.history.push("/turnaukset/".concat(l.name,"/"))}})),r.a.createElement(y,{link:"/turnaukset/".concat(l.name,"/muokkaa/")})):r.a.createElement(B,null))}function ce(e){var t=e.id,a=e.matches,n=e.deleteMatchById,l=e.toggleRefresh,o=Object(W.a)(a).sort((function(e,t){return e.startingTime.localeCompare(t.startingTime)}));return r.a.createElement("div",{className:"table-container"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Aika"),r.a.createElement("th",null,"Koti"),r.a.createElement("th",null),r.a.createElement("th",null,"Vieras"),r.a.createElement("th",null,"Tulos"),r.a.createElement("th",null,"Kentt\xe4"),r.a.createElement("th",null,"Poista"))),r.a.createElement("tbody",null,o.map((function(e){var a=e.homeTeam,o=e.visitorTeam,u=e.homeRoundsWon,c=e.visitorRoundsWon,s=e.startingTime,m=e.refereeName;return r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,s),r.a.createElement("td",null,a),r.a.createElement("td",null,"-"),r.a.createElement("td",null,o),r.a.createElement("th",null,"".concat(u," - ").concat(c)),r.a.createElement("td",null,m),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(e._id,t,(function(e){alert(e.err?"Poisto ep\xe4onnistui":"Poisto onnistui"),l()}))}},r.a.createElement("i",{className:"fas fa-trash-alt"}))))})))))}function se(e){var t={};return e.home||(t.home="Kotijoukkue on pakollinen"),e.visitor||(t.visitor="Vierasjoukkue on pakollinen"),e.refereeName||(t.refereeName="Tuomari on pakollinen"),t}function me(e,t,a,r,l){var o=Object(n.useState)(t),u=Object(k.a)(o,2),c=u[0],s=u[1],m=Object(n.useState)({}),i=Object(k.a)(m,2),d=i[0],E=i[1],h=Object(n.useState)(!1),f=Object(k.a)(h,2),p=f[0],b=f[1];function v(e){var t,a,n;t=e,a=r,n=function(e){alert(e.err?"Lis\xe4ys ep\xe4onnistui":"Lis\xe4ys onnistui"),l()},w.a.post("/api/tournaments/".concat(a,"/matches/"),t,x()).then((function(e){return n(e)})).catch((function(e){return n(e)}))}return Object(n.useEffect)((function(){p&&(0===Object.keys(d).length?c.home===c.visitor?alert("Joukkue ei voi pelata itse\xe4\xe4n vastaan"):(v({match:{homeTeam:c.home,visitorTeam:c.visitor,refereeName:c.refereeName,startingTime:c.startingTime,defaultMatch:e}}),b(!1)):b(!1))}),[d],e,p,v,c),{handleChange:function(e){s(Object(L.a)(Object(L.a)({},c),{},Object(M.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=a(c);E(e)},handleTimeChange:function(e){s(Object(L.a)(Object(L.a)({},c),{},{startingTime:e}))},submit:function(e){e.preventDefault();var t=a(c);E(t),b(!0)},errors:d,values:c,isSubmitting:p}}var ie=a(87),de=a.n(ie);function Ee(e){var t=e.array,a=e.value,n=e.onChange,l=e.name;return r.a.createElement("select",{value:a,onChange:n,name:l},t.map((function(e){return r.a.createElement("option",{value:e.name,key:e._id},e.name)})))}function he(e){var t=e.tournament,a=(e.navigate,e.toggleRefresh),n={home:t.teams[0].name,visitor:t.teams[0].name,refereeName:t.referees[0].name,startingTime:"10:00"},l=me(t.defaultMatch,n,se,t._id,a),o=l.handleChange,u=l.handleBlur,c=l.handleTimeChange,s=l.submit,m=l.errors,i=l.values,d=l.isSubmitting;return r.a.createElement("div",{className:"m3-container"},r.a.createElement("h2",null,"Lis\xe4\xe4 ottelu:"),r.a.createElement("form",{onSubmit:s,onBlur:u},r.a.createElement("label",{style:{display:"block"}},"Koti:",r.a.createElement(Ee,{className:m.home&&"error-input",array:t.teams,value:i.home,onChange:o,name:"home"})),m.home&&r.a.createElement("p",{className:"error-text"},m.home),r.a.createElement("label",{style:{display:"block"}},"Vieras:",r.a.createElement(Ee,{className:m.visitor&&"error-input",array:t.teams,value:i.visitor,onChange:o,name:"visitor"})),m.visitor&&r.a.createElement("p",{className:"error-text"},m.visitor),r.a.createElement("label",{style:{display:"block"}},"Aika:",r.a.createElement(de.a,{onChange:c,value:i.startingTime,disableClock:!0})),m.startingTime&&r.a.createElement("p",{className:"error-text"},m.startingTime),r.a.createElement("label",{style:{display:"block"}},"Tuomari:",r.a.createElement(Ee,{className:m.referee&&"error-input",array:t.referees,value:i.refereeName,onChange:o,name:"refereeName"})),m.refereeName&&r.a.createElement("p",{className:"error-text"},m.refereeName),r.a.createElement("button",{disabled:d,type:"submit"},"Tallenna")))}function fe(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1],u=Object(n.useContext)(O).getTournamentById;Object(n.useEffect)((function(){if(!l){var e=sessionStorage.getItem("tournamentId");e&&u(e,(function(e){o(e)}))}}));var c=function(){window.location.reload()};return r.a.createElement("div",null,r.a.createElement("h1",null,"Muokkaa otteluita"),l?r.a.createElement(n.Fragment,null,l.matches&&0!==l.matches.length?r.a.createElement(ce,{matches:l.matches,deleteMatchById:P,toggleRefresh:c,id:l._id}):r.a.createElement("p",null,"Ei otteluita viel\xe4!"),r.a.createElement("div",{className:"m3-container"},l.teams&&0!==l.teams.length?l.referees&&0!==l.referees.length?r.a.createElement(he,{tournament:l,toggleRefresh:c,navigate:function(){e.history.push("/turnaukset/".concat(l.name,"/"))}}):r.a.createElement("h3",null,"Ottelun lis\xe4\xe4miseen vaaditaan v\xe4hint\xe4\xe4n yksi tuomari, lis\xe4\xe4 se ensin"):r.a.createElement("h3",null,"Ottelun lis\xe4\xe4miseen vaaditaan joukkueita, lis\xe4\xe4 niit\xe4 ensin")),r.a.createElement("div",{className:"m3-container"},r.a.createElement(y,{link:"/turnaukset/".concat(l.name,"/muokkaa/")}))):r.a.createElement(B,null))}var pe=Object(n.createContext)(null),be=function(){return Object(n.useContext)(pe)},ve=function(e){var t=Object(n.useState)(null),a=Object(k.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){var e=sessionStorage.getItem("currentAuthData");e&&o(e)}),[]);var u={authData:l,onLogin:function(e,t){o(e),sessionStorage.setItem("currentAuthData",e),sessionStorage.setItem("adminId",t)},onLogout:function(){o(null),sessionStorage.clear()}};return r.a.createElement(pe.Provider,Object.assign({value:u},e))};function ge(e,t,a){var r=Object(n.useState)(e),l=Object(k.a)(r,2),o=l[0],u=l[1],c=Object(n.useState)({}),s=Object(k.a)(c,2),m=s[0],i=s[1],d=Object(n.useState)(!1),E=Object(k.a)(d,2),h=E[0],f=E[1],p=be().onLogin;function b(){!function(e,t){w.a.post("/api/admin/login",e).then((function(e){return t(e)})).catch((function(e){return t(e)}))}({username:o.username,password:o.password},(function(e){200===e.status?(p(e.data.token,e.data.id),a()):alert("V\xe4\xe4r\xe4 k\xe4ytt\xe4j\xe4 tai salasana")}))}return Object(n.useEffect)((function(){h&&(0===Object.keys(m).length?(b(),f(!1)):f(!1))}),[h,m,b]),{handleChange:function(e){u(Object(L.a)(Object(L.a)({},o),{},Object(M.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(o);i(e)},submit:function(e){e.preventDefault();var a=t(o);i(a),f(!0)},errors:m,values:o,isSubmitting:h}}function ke(e){var t={};return e.username?e.username.length<4&&(t.username="K\xe4ytt\xe4j\xe4n pituus on oltava v\xe4hint\xe4\xe4n 4 merkki\xe4"):t.username="K\xe4ytt\xe4j\xe4 on pakollinen",e.password?e.password.length<6&&(t.password="Salasanan pituus on oltava v\xe4hint\xe4\xe4n 6 merkki\xe4"):t.password="Salasana on pakollinen",t}var Oe={username:"",password:""};function je(e){var t=ge(Oe,ke,(function(){e.history.push("/"),window.location.reload()})),a=t.handleChange,n=t.handleBlur,l=t.submit,o=t.errors,u=t.values,c=t.isSubmitting;return r.a.createElement("form",{className:"admin-login",onSubmit:l},r.a.createElement("input",{name:"username",value:u.username,onChange:a,onBlur:n,placeholder:"K\xe4ytt\xe4j\xe4"}),r.a.createElement("p",{className:"errorMsg"},o.username),r.a.createElement("input",{name:"password",value:u.password,onChange:a,onBlur:n,placeholder:"Salasana",type:"password"}),r.a.createElement("p",{className:"errorMsg"},o.password),r.a.createElement("button",{className:"submit",disabled:c},"KIRJAUDU"))}function ye(e,t,a,r){var l=Object(n.useState)(e),o=Object(k.a)(l,2),u=o[0],c=o[1],s=Object(n.useState)({}),m=Object(k.a)(s,2),i=m[0],d=m[1],E=Object(n.useState)(!1),h=Object(k.a)(E,2),f=h[0],p=h[1];return Object(n.useEffect)((function(){f&&(0===Object.keys(i).length?(!function(){var e={password:u.password,newPassword:u.newPassword};!function(e,t,a){var n={password:t.password,newPassword:t.newPassword};w.a.patch("/api/admin/".concat(e,"/"),n,x()).then((function(e){return a(e)})).catch((function(e){return a(e)}))}(r,e,(function(e){200===e.status?(alert("Salasana vaihdettu"),a()):alert("V\xe4\xe4r\xe4 salasana")}))}(),p(!1)):p(!1))})),{handleChange:function(e){c(Object(L.a)(Object(L.a)({},u),{},Object(M.a)({},e.target.name,e.target.value)))},handleBlur:function(){var e=t(u);d(e)},submit:function(e){e.preventDefault();var a=t(u);d(a),p(!0)},errors:i,values:u,isSubmitting:f}}function Ne(e){var t={};return e.password?e.password.length<4&&(t.password="Vanhan salasanan pituus on v\xe4hint\xe4\xe4n 6 merkki\xe4"):t.password="Vanha salasana on pakollinen",e.newPassword?e.newPassword.length<6&&(t.newPassword="Uuden salasanan pituus on v\xe4hint\xe4\xe4n 6 merkki\xe4"):t.newPassword="Uusi salasana on pakollinen",e.newPasswordAgain?e.newPasswordAgain.length<6?t.newPasswordAgain="Salasanan vahvistuksen pituus on v\xe4hint\xe4\xe4n 6 merkki\xe4":e.newPassword!==e.newPasswordAgain&&(t.newPasswordAgain="Salasanat eiv\xe4t t\xe4sm\xe4\xe4"):t.newPasswordAgain="Vahvista salasana",t}var we={password:"",newPassword:"",newPasswordAgain:""};function xe(e){var t=sessionStorage.getItem("adminId"),a=ye(we,Ne,(function(){e.history.push("/"),window.location.reload()}),t),n=a.handleChange,l=a.handleBlur,o=a.submit,u=a.errors,c=a.values,s=a.isSubmitting;return r.a.createElement("form",{className:"change-pass",onSubmit:o},r.a.createElement("input",{name:"password",value:c.password,onChange:n,onBlur:l,placeholder:"Vanha salasana",type:"password"}),r.a.createElement("p",{className:"errorMsg"},u.password),r.a.createElement("input",{name:"newPassword",value:c.newPassword,onChange:n,onBlur:l,placeholder:"Uusi salasana",type:"password"}),r.a.createElement("p",{className:"errorMsg"},u.newPassword),r.a.createElement("input",{name:"newPasswordAgain",value:c.newPasswordAgain,onChange:n,onBlur:l,placeholder:"Vahvista uusi salasana",type:"password"}),r.a.createElement("p",{className:"errorMsg"},u.newPasswordAgain),r.a.createElement("button",{className:"submit",disabled:s},"VAIHDA SALASANA"))}var Se=function(e){return r.a.createElement(O.Provider,{value:{setTournamentId:function(e){sessionStorage.setItem("tournamentId",e)},getTournamentById:C,getTournaments:S}},e.children)};function Ce(e){var t=e.component,a=Object(u.a)(e,["component"]),n=be().authData?t:je;return r.a.createElement(c.a,Object.assign({},a,{component:n}))}var Pe=function(){return r.a.createElement(ve,null,r.a.createElement(s.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement("div",{className:"body-container"},r.a.createElement(Se,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:v}),r.a.createElement(c.a,{exact:!0,path:"/koti",component:v}),r.a.createElement(c.a,{exact:!0,path:"/turnaukset",component:j}),r.a.createElement(Ce,{exact:!0,path:"/turnaukset/uusi",component:V}),r.a.createElement(c.a,{exact:!0,path:"/turnaukset/:name/sarjataulukko",component:U}),r.a.createElement(c.a,{exact:!0,path:"/turnaukset/:name/otteluohjelma",component:H}),r.a.createElement(Ce,{excat:!0,path:"/turnaukset/:name/muokkaa/yleinen",component:Q}),r.a.createElement(c.a,{exact:!0,path:"/turnaukset/:name",component:I}),r.a.createElement(Ce,{exact:!0,path:"/turnaukset/:name/muokkaa/joukkueet",component:ae}),r.a.createElement(Ce,{excat:!0,path:"/turnaukset/:name/muokkaa/tuomarit",component:ue}),r.a.createElement(Ce,{exact:!0,path:"/turnaukset/:name/muokkaa/ottelut",component:fe}),r.a.createElement(Ce,{excat:!0,path:"/turnaukset/:name/muokkaa",component:Y}),r.a.createElement(Ce,{exact:!0,path:"/admin/vaihda-salasana",component:xe}),r.a.createElement(c.a,{exact:!0,path:"/kirjaudu",component:je}),r.a.createElement(Ce,{component:g})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},91:function(e,t,a){e.exports=a(195)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.667a2e94.chunk.js.map